{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":69,"index":127}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"getToken\", {\n    enumerable: true,\n    get: function () {\n      return getToken;\n    }\n  });\n  Object.defineProperty(exports, \"setToken\", {\n    enumerable: true,\n    get: function () {\n      return setToken;\n    }\n  });\n  Object.defineProperty(exports, \"resetToken\", {\n    enumerable: true,\n    get: function () {\n      return resetToken;\n    }\n  });\n  Object.defineProperty(exports, \"fetchBookings\", {\n    enumerable: true,\n    get: function () {\n      return fetchBookings;\n    }\n  });\n  Object.defineProperty(exports, \"fetchUserDetails\", {\n    enumerable: true,\n    get: function () {\n      return fetchUserDetails;\n    }\n  });\n  Object.defineProperty(exports, \"cancelBooking\", {\n    enumerable: true,\n    get: function () {\n      return cancelBooking;\n    }\n  });\n  Object.defineProperty(exports, \"settleBooking\", {\n    enumerable: true,\n    get: function () {\n      return settleBooking;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const TOKEN_STORAGE_KEY = 'qwiky_admin_token';\n\n  // Default token\n  const DEFAULT_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJtb2JpbGUiOiI5NjYwNzY2MjI3Iiwicm9sZXMiOlsiU1VQRVJfQURNSU4iLCJDVVNUT01FUiJdLCJ1c2VySWQiOiJjZGZiZDJmZC04OTkxLTRiNzMtOGZmYS1jNzE1MzZiOGI4MDkiLCJ0b2tlbl90eXBlIjoiYWNjZXNzIiwic3ViIjoiY2RmYmQyZmQtODk5MS00YjczLThmZmEtYzcxNTM2YjhiODA5IiwiaWF0IjoxNzcxMDU4MzE0LCJleHAiOjIwODIwOTgzMTR9.AukXaAriiGHGlwgEwRhleN2kzC0emcEoys7H3JG7PA4';\n\n  // Use the backend proxy URL\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://qadmin-bookings.preview.emergentagent.com';\n  const API_BASE_URL = `${BACKEND_URL}/api`;\n  let currentToken = DEFAULT_TOKEN;\n\n  // Create axios instance\n  const apiClient = axios.default.create({\n    baseURL: API_BASE_URL,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Request interceptor to add auth header\n  apiClient.interceptors.request.use(async config => {\n    // Try to get token from storage first\n    try {\n      const storedToken = await AsyncStorage.default.getItem(TOKEN_STORAGE_KEY);\n      if (storedToken) {\n        currentToken = storedToken;\n      }\n    } catch (e) {\n      // Use current token if storage fails\n    }\n    config.headers.Authorization = `Bearer ${currentToken}`;\n    return config;\n  }, error => Promise.reject(error));\n\n  // Response interceptor for error handling\n  apiClient.interceptors.response.use(response => response, error => {\n    if (error.response) {\n      console.error('API Error:', error.response.status, error.response.data);\n    } else if (error.request) {\n      console.error('Network Error:', error.message);\n    } else {\n      console.error('Request Error:', error.message);\n    }\n    return Promise.reject(error);\n  });\n\n  // Token management functions\n  const getToken = async () => {\n    try {\n      const storedToken = await AsyncStorage.default.getItem(TOKEN_STORAGE_KEY);\n      return storedToken || DEFAULT_TOKEN;\n    } catch {\n      return DEFAULT_TOKEN;\n    }\n  };\n  const setToken = async token => {\n    try {\n      await AsyncStorage.default.setItem(TOKEN_STORAGE_KEY, token);\n      currentToken = token;\n    } catch (e) {\n      console.error('Failed to save token:', e);\n      throw e;\n    }\n  };\n  const resetToken = async () => {\n    try {\n      await AsyncStorage.default.removeItem(TOKEN_STORAGE_KEY);\n      currentToken = DEFAULT_TOKEN;\n    } catch (e) {\n      console.error('Failed to reset token:', e);\n    }\n  };\n\n  // API Functions using backend proxy\n\n  // Fetch all bookings\n  const fetchBookings = async () => {\n    const response = await apiClient.get('/qwiky/bookings');\n    return response.data;\n  };\n\n  // Fetch user details\n  const fetchUserDetails = async userId => {\n    const response = await apiClient.get(`/qwiky/user/${userId}`);\n    return response.data;\n  };\n\n  // Cancel booking\n  const cancelBooking = async bookingId => {\n    const response = await apiClient.post(`/qwiky/booking/${bookingId}/cancel`);\n    return response.data;\n  };\n\n  // Settle booking\n  const settleBooking = async bookingId => {\n    const response = await apiClient.post(`/qwiky/booking/${bookingId}/settled`);\n    return response.data;\n  };\n  var _default = apiClient;\n});","lineCount":164,"map":[[12,2,113,0,"Object"],[12,8,113,0],[12,9,113,0,"defineProperty"],[12,23,113,0],[12,24,113,0,"exports"],[12,31,113,0],[13,4,113,0,"enumerable"],[13,14,113,0],[14,4,113,0,"get"],[14,7,113,0],[14,18,113,0,"get"],[14,19,113,0],[15,6,113,0],[15,13,113,0,"_default"],[15,21,113,0],[16,4,113,0],[17,2,113,0],[18,2,59,0,"Object"],[18,8,59,0],[18,9,59,0,"defineProperty"],[18,23,59,0],[18,24,59,0,"exports"],[18,31,59,0],[19,4,59,0,"enumerable"],[19,14,59,0],[20,4,59,0,"get"],[20,7,59,0],[20,18,59,0,"get"],[20,19,59,0],[21,6,59,0],[21,13,59,0,"getToken"],[21,21,59,0],[22,4,59,0],[23,2,59,0],[24,2,68,0,"Object"],[24,8,68,0],[24,9,68,0,"defineProperty"],[24,23,68,0],[24,24,68,0,"exports"],[24,31,68,0],[25,4,68,0,"enumerable"],[25,14,68,0],[26,4,68,0,"get"],[26,7,68,0],[26,18,68,0,"get"],[26,19,68,0],[27,6,68,0],[27,13,68,0,"setToken"],[27,21,68,0],[28,4,68,0],[29,2,68,0],[30,2,78,0,"Object"],[30,8,78,0],[30,9,78,0,"defineProperty"],[30,23,78,0],[30,24,78,0,"exports"],[30,31,78,0],[31,4,78,0,"enumerable"],[31,14,78,0],[32,4,78,0,"get"],[32,7,78,0],[32,18,78,0,"get"],[32,19,78,0],[33,6,78,0],[33,13,78,0,"resetToken"],[33,23,78,0],[34,4,78,0],[35,2,78,0],[36,2,90,0,"Object"],[36,8,90,0],[36,9,90,0,"defineProperty"],[36,23,90,0],[36,24,90,0,"exports"],[36,31,90,0],[37,4,90,0,"enumerable"],[37,14,90,0],[38,4,90,0,"get"],[38,7,90,0],[38,18,90,0,"get"],[38,19,90,0],[39,6,90,0],[39,13,90,0,"fetchBookings"],[39,26,90,0],[40,4,90,0],[41,2,90,0],[42,2,96,0,"Object"],[42,8,96,0],[42,9,96,0,"defineProperty"],[42,23,96,0],[42,24,96,0,"exports"],[42,31,96,0],[43,4,96,0,"enumerable"],[43,14,96,0],[44,4,96,0,"get"],[44,7,96,0],[44,18,96,0,"get"],[44,19,96,0],[45,6,96,0],[45,13,96,0,"fetchUserDetails"],[45,29,96,0],[46,4,96,0],[47,2,96,0],[48,2,102,0,"Object"],[48,8,102,0],[48,9,102,0,"defineProperty"],[48,23,102,0],[48,24,102,0,"exports"],[48,31,102,0],[49,4,102,0,"enumerable"],[49,14,102,0],[50,4,102,0,"get"],[50,7,102,0],[50,18,102,0,"get"],[50,19,102,0],[51,6,102,0],[51,13,102,0,"cancelBooking"],[51,26,102,0],[52,4,102,0],[53,2,102,0],[54,2,108,0,"Object"],[54,8,108,0],[54,9,108,0,"defineProperty"],[54,23,108,0],[54,24,108,0,"exports"],[54,31,108,0],[55,4,108,0,"enumerable"],[55,14,108,0],[56,4,108,0,"get"],[56,7,108,0],[56,18,108,0,"get"],[56,19,108,0],[57,6,108,0],[57,13,108,0,"settleBooking"],[57,26,108,0],[58,4,108,0],[59,2,108,0],[60,2,111,2],[60,6,111,2,"_expoVirtualEnv"],[60,21,111,2],[60,24,111,2,"require"],[60,31,111,2],[60,32,111,2,"_dependencyMap"],[60,46,111,2],[61,2,1,0],[61,6,1,0,"_axios"],[61,12,1,0],[61,15,1,0,"require"],[61,22,1,0],[61,23,1,0,"_dependencyMap"],[61,37,1,0],[62,2,1,0],[62,6,1,0,"axios"],[62,11,1,0],[62,14,1,0,"_interopDefault"],[62,29,1,0],[62,30,1,0,"_axios"],[62,36,1,0],[63,2,2,0],[63,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[63,42,2,0],[63,45,2,0,"require"],[63,52,2,0],[63,53,2,0,"_dependencyMap"],[63,67,2,0],[64,2,2,0],[64,6,2,0,"AsyncStorage"],[64,18,2,0],[64,21,2,0,"_interopDefault"],[64,36,2,0],[64,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[64,73,2,0],[65,2,5,0],[65,8,5,6,"TOKEN_STORAGE_KEY"],[65,25,5,23],[65,28,5,26],[65,47,5,45],[67,2,7,0],[68,2,8,0],[68,8,8,6,"DEFAULT_TOKEN"],[68,21,8,19],[68,24,8,22],[68,367,8,365],[70,2,10,0],[71,2,11,0],[71,8,11,6,"BACKEND_URL"],[71,19,11,17],[71,22,11,20,"_expoVirtualEnv"],[71,37,11,20],[71,38,11,20,"env"],[71,41,11,20],[71,42,11,20,"EXPO_PUBLIC_BACKEND_URL"],[71,65,11,20],[71,69,11,59],[71,120,11,110],[72,2,12,0],[72,8,12,6,"API_BASE_URL"],[72,20,12,18],[72,23,12,21],[72,26,12,24,"BACKEND_URL"],[72,37,12,35],[72,43,12,41],[73,2,14,0],[73,6,14,4,"currentToken"],[73,18,14,16],[73,21,14,19,"DEFAULT_TOKEN"],[73,34,14,32],[75,2,16,0],[76,2,17,0],[76,8,17,6,"apiClient"],[76,17,17,30],[76,20,17,33,"axios"],[76,25,17,38],[76,26,17,38,"default"],[76,33,17,38],[76,34,17,39,"create"],[76,40,17,45],[76,41,17,46],[77,4,18,2,"baseURL"],[77,11,18,9],[77,13,18,11,"API_BASE_URL"],[77,25,18,23],[78,4,19,2,"timeout"],[78,11,19,9],[78,13,19,11],[78,18,19,16],[79,4,20,2,"headers"],[79,11,20,9],[79,13,20,11],[80,6,21,4],[80,20,21,18],[80,22,21,20],[81,4,22,2],[82,2,23,0],[82,3,23,1],[82,4,23,2],[84,2,25,0],[85,2,26,0,"apiClient"],[85,11,26,9],[85,12,26,10,"interceptors"],[85,24,26,22],[85,25,26,23,"request"],[85,32,26,30],[85,33,26,31,"use"],[85,36,26,34],[85,37,27,2],[85,43,27,9,"config"],[85,49,27,15],[85,53,27,20],[86,4,28,4],[87,4,29,4],[87,8,29,8],[88,6,30,6],[88,12,30,12,"storedToken"],[88,23,30,23],[88,26,30,26],[88,32,30,32,"AsyncStorage"],[88,44,30,44],[88,45,30,44,"default"],[88,52,30,44],[88,53,30,45,"getItem"],[88,60,30,52],[88,61,30,53,"TOKEN_STORAGE_KEY"],[88,78,30,70],[88,79,30,71],[89,6,31,6],[89,10,31,10,"storedToken"],[89,21,31,21],[89,23,31,23],[90,8,32,8,"currentToken"],[90,20,32,20],[90,23,32,23,"storedToken"],[90,34,32,34],[91,6,33,6],[92,4,34,4],[92,5,34,5],[92,6,34,6],[92,13,34,13,"e"],[92,14,34,14],[92,16,34,16],[93,6,35,6],[94,4,35,6],[95,4,37,4,"config"],[95,10,37,10],[95,11,37,11,"headers"],[95,18,37,18],[95,19,37,19,"Authorization"],[95,32,37,32],[95,35,37,35],[95,45,37,45,"currentToken"],[95,57,37,57],[95,59,37,59],[96,4,38,4],[96,11,38,11,"config"],[96,17,38,17],[97,2,39,2],[97,3,39,3],[97,5,40,3,"error"],[97,10,40,8],[97,14,40,13,"Promise"],[97,21,40,20],[97,22,40,21,"reject"],[97,28,40,27],[97,29,40,28,"error"],[97,34,40,33],[97,35,41,0],[97,36,41,1],[99,2,43,0],[100,2,44,0,"apiClient"],[100,11,44,9],[100,12,44,10,"interceptors"],[100,24,44,22],[100,25,44,23,"response"],[100,33,44,31],[100,34,44,32,"use"],[100,37,44,35],[100,38,45,3,"response"],[100,46,45,11],[100,50,45,16,"response"],[100,58,45,24],[100,60,46,3,"error"],[100,65,46,20],[100,69,46,25],[101,4,47,4],[101,8,47,8,"error"],[101,13,47,13],[101,14,47,14,"response"],[101,22,47,22],[101,24,47,24],[102,6,48,6,"console"],[102,13,48,13],[102,14,48,14,"error"],[102,19,48,19],[102,20,48,20],[102,32,48,32],[102,34,48,34,"error"],[102,39,48,39],[102,40,48,40,"response"],[102,48,48,48],[102,49,48,49,"status"],[102,55,48,55],[102,57,48,57,"error"],[102,62,48,62],[102,63,48,63,"response"],[102,71,48,71],[102,72,48,72,"data"],[102,76,48,76],[102,77,48,77],[103,4,49,4],[103,5,49,5],[103,11,49,11],[103,15,49,15,"error"],[103,20,49,20],[103,21,49,21,"request"],[103,28,49,28],[103,30,49,30],[104,6,50,6,"console"],[104,13,50,13],[104,14,50,14,"error"],[104,19,50,19],[104,20,50,20],[104,36,50,36],[104,38,50,38,"error"],[104,43,50,43],[104,44,50,44,"message"],[104,51,50,51],[104,52,50,52],[105,4,51,4],[105,5,51,5],[105,11,51,11],[106,6,52,6,"console"],[106,13,52,13],[106,14,52,14,"error"],[106,19,52,19],[106,20,52,20],[106,36,52,36],[106,38,52,38,"error"],[106,43,52,43],[106,44,52,44,"message"],[106,51,52,51],[106,52,52,52],[107,4,53,4],[108,4,54,4],[108,11,54,11,"Promise"],[108,18,54,18],[108,19,54,19,"reject"],[108,25,54,25],[108,26,54,26,"error"],[108,31,54,31],[108,32,54,32],[109,2,55,2],[109,3,56,0],[109,4,56,1],[111,2,58,0],[112,2,59,7],[112,8,59,13,"getToken"],[112,16,59,21],[112,19,59,24],[112,25,59,24,"getToken"],[112,26,59,24],[112,31,59,53],[113,4,60,2],[113,8,60,6],[114,6,61,4],[114,12,61,10,"storedToken"],[114,23,61,21],[114,26,61,24],[114,32,61,30,"AsyncStorage"],[114,44,61,42],[114,45,61,42,"default"],[114,52,61,42],[114,53,61,43,"getItem"],[114,60,61,50],[114,61,61,51,"TOKEN_STORAGE_KEY"],[114,78,61,68],[114,79,61,69],[115,6,62,4],[115,13,62,11,"storedToken"],[115,24,62,22],[115,28,62,26,"DEFAULT_TOKEN"],[115,41,62,39],[116,4,63,2],[116,5,63,3],[116,6,63,4],[116,12,63,10],[117,6,64,4],[117,13,64,11,"DEFAULT_TOKEN"],[117,26,64,24],[118,4,65,2],[119,2,66,0],[119,3,66,1],[120,2,68,7],[120,8,68,13,"setToken"],[120,16,68,21],[120,19,68,24],[120,25,68,31,"token"],[120,30,68,44],[120,34,68,64],[121,4,69,2],[121,8,69,6],[122,6,70,4],[122,12,70,10,"AsyncStorage"],[122,24,70,22],[122,25,70,22,"default"],[122,32,70,22],[122,33,70,23,"setItem"],[122,40,70,30],[122,41,70,31,"TOKEN_STORAGE_KEY"],[122,58,70,48],[122,60,70,50,"token"],[122,65,70,55],[122,66,70,56],[123,6,71,4,"currentToken"],[123,18,71,16],[123,21,71,19,"token"],[123,26,71,24],[124,4,72,2],[124,5,72,3],[124,6,72,4],[124,13,72,11,"e"],[124,14,72,12],[124,16,72,14],[125,6,73,4,"console"],[125,13,73,11],[125,14,73,12,"error"],[125,19,73,17],[125,20,73,18],[125,43,73,41],[125,45,73,43,"e"],[125,46,73,44],[125,47,73,45],[126,6,74,4],[126,12,74,10,"e"],[126,13,74,11],[127,4,75,2],[128,2,76,0],[128,3,76,1],[129,2,78,7],[129,8,78,13,"resetToken"],[129,18,78,23],[129,21,78,26],[129,27,78,26,"resetToken"],[129,28,78,26],[129,33,78,53],[130,4,79,2],[130,8,79,6],[131,6,80,4],[131,12,80,10,"AsyncStorage"],[131,24,80,22],[131,25,80,22,"default"],[131,32,80,22],[131,33,80,23,"removeItem"],[131,43,80,33],[131,44,80,34,"TOKEN_STORAGE_KEY"],[131,61,80,51],[131,62,80,52],[132,6,81,4,"currentToken"],[132,18,81,16],[132,21,81,19,"DEFAULT_TOKEN"],[132,34,81,32],[133,4,82,2],[133,5,82,3],[133,6,82,4],[133,13,82,11,"e"],[133,14,82,12],[133,16,82,14],[134,6,83,4,"console"],[134,13,83,11],[134,14,83,12,"error"],[134,19,83,17],[134,20,83,18],[134,44,83,42],[134,46,83,44,"e"],[134,47,83,45],[134,48,83,46],[135,4,84,2],[136,2,85,0],[136,3,85,1],[138,2,87,0],[140,2,89,0],[141,2,90,7],[141,8,90,13,"fetchBookings"],[141,21,90,26],[141,24,90,29],[141,30,90,29,"fetchBookings"],[141,31,90,29],[141,36,90,41],[142,4,91,2],[142,10,91,8,"response"],[142,18,91,16],[142,21,91,19],[142,27,91,25,"apiClient"],[142,36,91,34],[142,37,91,35,"get"],[142,40,91,38],[142,41,91,39],[142,58,91,56],[142,59,91,57],[143,4,92,2],[143,11,92,9,"response"],[143,19,92,17],[143,20,92,18,"data"],[143,24,92,22],[144,2,93,0],[144,3,93,1],[146,2,95,0],[147,2,96,7],[147,8,96,13,"fetchUserDetails"],[147,24,96,29],[147,27,96,32],[147,33,96,39,"userId"],[147,39,96,53],[147,43,96,58],[148,4,97,2],[148,10,97,8,"response"],[148,18,97,16],[148,21,97,19],[148,27,97,25,"apiClient"],[148,36,97,34],[148,37,97,35,"get"],[148,40,97,38],[148,41,97,39],[148,56,97,54,"userId"],[148,62,97,60],[148,64,97,62],[148,65,97,63],[149,4,98,2],[149,11,98,9,"response"],[149,19,98,17],[149,20,98,18,"data"],[149,24,98,22],[150,2,99,0],[150,3,99,1],[152,2,101,0],[153,2,102,7],[153,8,102,13,"cancelBooking"],[153,21,102,26],[153,24,102,29],[153,30,102,36,"bookingId"],[153,39,102,53],[153,43,102,58],[154,4,103,2],[154,10,103,8,"response"],[154,18,103,16],[154,21,103,19],[154,27,103,25,"apiClient"],[154,36,103,34],[154,37,103,35,"post"],[154,41,103,39],[154,42,103,40],[154,60,103,58,"bookingId"],[154,69,103,67],[154,78,103,76],[154,79,103,77],[155,4,104,2],[155,11,104,9,"response"],[155,19,104,17],[155,20,104,18,"data"],[155,24,104,22],[156,2,105,0],[156,3,105,1],[158,2,107,0],[159,2,108,7],[159,8,108,13,"settleBooking"],[159,21,108,26],[159,24,108,29],[159,30,108,36,"bookingId"],[159,39,108,53],[159,43,108,58],[160,4,109,2],[160,10,109,8,"response"],[160,18,109,16],[160,21,109,19],[160,27,109,25,"apiClient"],[160,36,109,34],[160,37,109,35,"post"],[160,41,109,39],[160,42,109,40],[160,60,109,58,"bookingId"],[160,69,109,67],[160,79,109,77],[160,80,109,78],[161,4,110,2],[161,11,110,9,"response"],[161,19,110,17],[161,20,110,18,"data"],[161,24,110,22],[162,2,111,0],[162,3,111,1],[163,2,113,0],[163,6,113,0,"_default"],[163,14,113,0],[163,17,113,15,"apiClient"],[163,26,113,24],[164,0,113,25],[164,3]],"functionMap":{"names":["<global>","apiClient.interceptors.request.use$argument_0","apiClient.interceptors.request.use$argument_1","apiClient.interceptors.response.use$argument_0","apiClient.interceptors.response.use$argument_1","getToken","setToken","resetToken","fetchBookings","fetchUserDetails","cancelBooking","settleBooking"],"mappings":"AAA;EC0B;GDY;EEC,gCF;EGK,sBH;EIC;GJS;wBKI;CLO;wBME;CNQ;0BOE;CPO;6BQK;CRG;gCSG;CTG;6BUG;CVG;6BWG;CXG"},"hasCjsExports":false},"type":"js/module"}]}